<!DOCTYPE html>
<html>
  <head>
    <title>Map test</title>
    <meta name="viewport" content="initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
    crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset="utf-8">
    <style>
 
      #map {
        height: 500px;
      }
      
      html, body {
        height: 100%;
        margin: 10px;
        padding: 10px;
      }
    </style>
  </head>
  <body>
      
    <div class=container>
            <div class=jumbotron>
                  <h2>Orlando Safe Streets Project</h2>
            <div id="map"></div>

                 <br>

    <form>
            <div class="form">
                <div class="input-group mb-3">
                    <div class="input-group-prepend ">
                        <button class="button btn-warning" type="button" id="button-addon1">Enter Street Address</button>
                    </div>
                    <input type="text" class="form-control col-md-6 " placeholder="Ex. - 1324 Robinson St, Orlando, FL">
                </div>
          </form>
</div>
</div>


<script>

      //initialize map and center it//
      var map;
      url = 'https://data.cityoforlando.net/resource/6qd7-sr7g.json?case_offense_type=Aggravated assault';

function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: 28.5383, lng: -81.3792},
          zoom: 5
        });

    var kml_url = "https://data.cityoforlando.net/api/geospatial/dpx3-qjrc?method=export&format=KML";    

    var laBoundaries = new google.maps.KmlLayer({
        url: kml_url,
        map: map
    });

//END initialize map and center it//




//ajax call for theft//
$.ajax({
    url: "https://data.cityoforlando.net/resource/6qd7-sr7g.json",
    type: "GET",
    data: {
      "$limit" : 10000,
      status: "Mapped",
      "$q" : "2017",
      case_offense_category: "Theft",
      "$$app_token" : "QWmNPsTrdyvnpvmYSgTcxBVT0"
    }
}).done(function(data) {
  // alert("Retrieved " + data.length + " records from the dataset!");
  console.log(data);

 var tMarker;

          $.each(data, function(i, entry) {
              var tMarker = new google.maps.Marker({
                  position: new google.maps.LatLng(entry.location.coordinates[1], 
                                                   entry.location.coordinates[0]),
                  map: map,
                  icon: 'yellow_MarkerT.png',
                  title: location.name
              });
          },


//ajax call for homicide data//
$.ajax({
    url: "https://data.cityoforlando.net/resource/6qd7-sr7g.json",
    type: "GET",
    data: {
      "$limit" : 10000,
      status: "Mapped",
      "$q" : "2017",
      case_offense_category: "Homicide",
      "$$app_token" : "QWmNPsTrdyvnpvmYSgTcxBVT0"
    }

}).done(function(data) {
  // alert("Retrieved " + data.length + " records from the dataset!");
  console.log(data);

 var hMarker;

          $.each(data, function(i, entry) {
              var hMarker = new google.maps.Marker({
                  position: new google.maps.LatLng(entry.location.coordinates[1], 
                                                   entry.location.coordinates[0]),
                  map: map,
                  icon: 'red_MarkerH.png',
                  title: location.name
              });
          },

          
)}
)

)}
)}
//END ajax call for data//



//ajax call for Assault data//
$.ajax({
    url: "https://data.cityoforlando.net/resource/6qd7-sr7g.json",
    type: "GET",
    data: {
      "$limit" : 10000,
      status: "Mapped",
      "$q" : "2017",
      case_offense_category: "Assault",
      "$$app_token" : "QWmNPsTrdyvnpvmYSgTcxBVT0"
    }

}).done(function(data) {
  // alert("Retrieved " + data.length + " records from the dataset!");
  console.log(data);

 var aMarker;

          $.each(data, function(i, entry) {
              var aMarker = new google.maps.Marker({
                  position: new google.maps.LatLng(entry.location.coordinates[1], 
                                                   entry.location.coordinates[0]),
                  map: map,
                  icon: 'green_MarkerA.png',
                  title: location.name
              });
          },


          
          )}
)
//END ajax call for Assault data//


//ajax call for burglary data//
$.ajax({
    url: "https://data.cityoforlando.net/resource/6qd7-sr7g.json",
    type: "GET",
    data: {
      "$limit" : 10000,
      status: "Mapped",
      "$q" : "2017",
      case_offense_category: "Burglary",
      "$$app_token" : "QWmNPsTrdyvnpvmYSgTcxBVT0"
    }

}).done(function(data) {
  // alert("Retrieved " + data.length + " records from the dataset!");
  console.log(data);

 var bMarker;

          $.each(data, function(i, entry) {
              var bMarker = new google.maps.Marker({
                  position: new google.maps.LatLng(entry.location.coordinates[1], 
                                                   entry.location.coordinates[0]),
                  map: map,
                  icon: 'purple_MarkerB.png',
                  title: location.name
              });
          },


          
          )}
)
//END ajax call for Burglary data//



//ajax call for Narcotics data//
$.ajax({
    url: "https://data.cityoforlando.net/resource/6qd7-sr7g.json",
    type: "GET",
    data: {
      "$limit" : 10000,
      status: "Mapped",
      "$q" : "2017",
      case_offense_category: "Narcotics",
      "$$app_token" : "QWmNPsTrdyvnpvmYSgTcxBVT0"
    }

}).done(function(data) {
  // alert("Retrieved " + data.length + " records from the dataset!");
  console.log(data);

 var bMarker;

          $.each(data, function(i, entry) {
              var bMarker = new google.maps.Marker({
                  position: new google.maps.LatLng(entry.location.coordinates[1], 
                                                   entry.location.coordinates[0]),
                  map: map,
                  icon: 'brown_MarkerN.png',
                  title: location.name
              });
          },


          
          )}
)
//END ajax call for Narcotics data//


//ajax call for Vehicle Theft data//
$.ajax({
    url: "https://data.cityoforlando.net/resource/6qd7-sr7g.json",
    type: "GET",
    data: {
      "$limit" : 10000,
      status: "Mapped",
      "$q" : "2017",
      case_offense_category: "Vehicle Theft",
      "$$app_token" : "QWmNPsTrdyvnpvmYSgTcxBVT0"
    }

}).done(function(data) {
  // alert("Retrieved " + data.length + " records from the dataset!");
  console.log(data);

 var bMarker;

          $.each(data, function(i, entry) {
              var bMarker = new google.maps.Marker({
                  position: new google.maps.LatLng(entry.location.coordinates[1], 
                                                   entry.location.coordinates[0]),
                  map: map,
                  icon: 'orange_MarkerV.png',
                  title: location.name
              });
          },


          
          )}
)
//END ajax call for Vehicle Theft data//

//ajax call for Robbery data//
$.ajax({
    url: "https://data.cityoforlando.net/resource/6qd7-sr7g.json",
    type: "GET",
    data: {
      "$limit" : 10000,
      status: "Mapped",
      "$q" : "2017",
      case_offense_category: "Robbery",
      "$$app_token" : "QWmNPsTrdyvnpvmYSgTcxBVT0"
    }

}).done(function(data) {
  // alert("Retrieved " + data.length + " records from the dataset!");
  console.log(data);

 var rMarker;

          $.each(data, function(i, entry) {
              var rMarker = new google.maps.Marker({
                  position: new google.maps.LatLng(entry.location.coordinates[1], 
                                                   entry.location.coordinates[0]),
                  map: map,
                  icon: 'paleblue_MarkerR.png',
                  title: location.name
              });
          },


          
          )}
)
//END ajax call for Robbery data//



    </script>


Robbery

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC_DEpDpIsPJFO4wxpCxjr6cJu20USSmAw&callback=initMap"
    async defer></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"></script>


  </body>
</html>